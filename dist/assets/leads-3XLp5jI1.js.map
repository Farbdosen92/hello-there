{"version":3,"file":"leads-3XLp5jI1.js","sources":["../../node_modules/lucide-react/dist/esm/icons/download.js","../../node_modules/lucide-react/dist/esm/icons/refresh-cw.js","../../src/pages/dashboard/leads.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 15V3\", key: \"m9g1x1\" }],\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }],\n  [\"path\", { d: \"m7 10 5 5 5-5\", key: \"brsn70\" }]\n];\nconst Download = createLucideIcon(\"download\", __iconNode);\n\nexport { __iconNode, Download as default };\n//# sourceMappingURL=download.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8\", key: \"v9h5vc\" }],\n  [\"path\", { d: \"M21 3v5h-5\", key: \"1q7to0\" }],\n  [\"path\", { d: \"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16\", key: \"3uifl3\" }],\n  [\"path\", { d: \"M8 16H3v5\", key: \"1cv678\" }]\n];\nconst RefreshCw = createLucideIcon(\"refresh-cw\", __iconNode);\n\nexport { __iconNode, RefreshCw as default };\n//# sourceMappingURL=refresh-cw.js.map\n","import { useEffect, useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Download, RefreshCw } from \"lucide-react\";\nimport {\n    Table,\n    TableBody,\n    TableCell,\n    TableHead,\n    TableHeader,\n    TableRow,\n} from \"@/components/ui/table\";\nimport { supabase } from \"@/lib/supabase/client\";\nimport { useAuth } from \"@/contexts/auth-context\";\n\nexport default function LeadsPage() {\n    const { user } = useAuth();\n    const [leads, setLeads] = useState<any[]>([]);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        async function fetchLeads() {\n            if (!user) return;\n\n            const { data } = await supabase\n                .from(\"leads\")\n                .select(\"*, users(name)\")\n                .eq(\"captured_by_user_id\", user.id)\n                .order(\"created_at\", { ascending: false });\n\n            setLeads(data || []);\n            setLoading(false);\n        }\n\n        fetchLeads();\n    }, [user]);\n\n    const handleExportCSV = () => {\n        const headers = \"Name,Email,Sentiment,Date\\n\";\n        const rows = leads.map((l) => `${l.lead_name},${l.lead_email},${l.sentiment},${l.created_at}`).join(\"\\n\");\n        const blob = new Blob([headers + rows], { type: \"text/csv\" });\n        const url = URL.createObjectURL(blob);\n        const link = document.createElement(\"a\");\n        link.href = url;\n        link.download = \"leads_export.csv\";\n        link.click();\n    };\n\n    const handleCRMSync = () => {\n        alert(\"Synchronisiere mit konfiguriertem CRM (Salesforce/HubSpot)...\");\n    };\n\n    if (loading) {\n        return (\n            <div className=\"flex items-center justify-center h-64\">\n                <div className=\"h-6 w-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin\" />\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"space-y-6\">\n            <div className=\"flex items-center justify-between\">\n                <div>\n                    <h1 className=\"text-3xl font-bold tracking-tight\">Kontakte</h1>\n                    <p className=\"text-zinc-500\">Erfasste Kontakte aus dem Visitenkarten-Modus.</p>\n                </div>\n                <div className=\"flex gap-2\">\n                    <Button variant=\"outline\" className=\"border-white/10\" onClick={handleExportCSV}>\n                        <Download size={18} className=\"mr-2\" /> CSV Exportieren\n                    </Button>\n                    <Button className=\"bg-blue-600 hover:bg-blue-500 text-white\" onClick={handleCRMSync}>\n                        <RefreshCw size={18} className=\"mr-2\" /> CRM Synchronisieren\n                    </Button>\n                </div>\n            </div>\n\n            <div className=\"rounded-md border border-white/5 bg-zinc-900/50\">\n                <Table>\n                    <TableHeader>\n                        <TableRow className=\"border-white/5 hover:bg-white/5\">\n                            <TableHead>Name</TableHead>\n                            <TableHead>E-Mail</TableHead>\n                            <TableHead>Stimmung</TableHead>\n                            <TableHead>Erfasst von</TableHead>\n                            <TableHead>Datum</TableHead>\n                        </TableRow>\n                    </TableHeader>\n                    <TableBody>\n                        {leads.map((lead) => (\n                            <TableRow key={lead.id} className=\"border-white/5 hover:bg-white/5\">\n                                <TableCell className=\"font-medium text-white\">{lead.lead_name}</TableCell>\n                                <TableCell className=\"text-zinc-400\">{lead.lead_email}</TableCell>\n                                <TableCell>\n                                    <Badge\n                                        variant=\"outline\"\n                                        className={\n                                            lead.sentiment === \"hot\"\n                                                ? \"border-green-500 text-green-400 bg-green-500/10\"\n                                                : lead.sentiment === \"warm\"\n                                                    ? \"border-yellow-500 text-yellow-400 bg-yellow-500/10\"\n                                                    : \"border-red-500 text-red-400 bg-red-500/10\"\n                                        }\n                                    >\n                                        {lead.sentiment}\n                                    </Badge>\n                                </TableCell>\n                                <TableCell className=\"text-zinc-400\">{lead.users?.name || \"-\"}</TableCell>\n                                <TableCell className=\"text-zinc-500\">{new Date(lead.created_at).toLocaleDateString()}</TableCell>\n                            </TableRow>\n                        ))}\n                        {leads.length === 0 && (\n                            <TableRow>\n                                <TableCell colSpan={5} className=\"text-center py-10 text-zinc-500\">\n                                    Noch keine Kontakte erfasst.\n                                </TableCell>\n                            </TableRow>\n                        )}\n                    </TableBody>\n                </Table>\n            </div>\n        </div>\n    );\n}\n"],"names":["__iconNode","Download","createLucideIcon","RefreshCw","LeadsPage","user","useAuth","leads","setLeads","useState","loading","setLoading","useEffect","fetchLeads","data","supabase","handleExportCSV","headers","rows","l","blob","url","link","handleCRMSync","jsx","jsxs","Button","Table","TableHeader","TableRow","TableHead","TableBody","lead","TableCell","Badge","_a"],"mappings":"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","x_google_ignoreList":[0,1]}