import{c as m,u as g,r as d,j as e,s as w}from"./index-Bzt5sERx.js";import{B as h}from"./button-Bm0FbSRY.js";import{T as v,a as y,b as o,c as n,d as k,e as a,B as _}from"./table-CVlPaeWe.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],M=m("download",S);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],L=m("refresh-cw",E);function T(){const{user:c}=g(),[i,x]=d.useState([]),[u,b]=d.useState(!0);d.useEffect(()=>{async function s(){if(!c)return;const{data:t}=await w.from("leads").select("*, users(name)").eq("captured_by_user_id",c.id).order("created_at",{ascending:!1});x(t||[]),b(!1)}s()},[c]);const j=()=>{const s=`Name,Email,Sentiment,Date
`,t=i.map(r=>`${r.lead_name},${r.lead_email},${r.sentiment},${r.created_at}`).join(`
`),p=new Blob([s+t],{type:"text/csv"}),N=URL.createObjectURL(p),l=document.createElement("a");l.href=N,l.download="leads_export.csv",l.click()},f=()=>{alert("Synchronisiere mit konfiguriertem CRM (Salesforce/HubSpot)...")};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"h-6 w-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Kontakte"}),e.jsx("p",{className:"text-zinc-500",children:"Erfasste Kontakte aus dem Visitenkarten-Modus."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(h,{variant:"outline",className:"border-white/10",onClick:j,children:[e.jsx(M,{size:18,className:"mr-2"})," CSV Exportieren"]}),e.jsxs(h,{className:"bg-blue-600 hover:bg-blue-500 text-white",onClick:f,children:[e.jsx(L,{size:18,className:"mr-2"})," CRM Synchronisieren"]})]})]}),e.jsx("div",{className:"rounded-md border border-white/5 bg-zinc-900/50",children:e.jsxs(v,{children:[e.jsx(y,{children:e.jsxs(o,{className:"border-white/5 hover:bg-white/5",children:[e.jsx(n,{children:"Name"}),e.jsx(n,{children:"E-Mail"}),e.jsx(n,{children:"Stimmung"}),e.jsx(n,{children:"Erfasst von"}),e.jsx(n,{children:"Datum"})]})}),e.jsxs(k,{children:[i.map(s=>{var t;return e.jsxs(o,{className:"border-white/5 hover:bg-white/5",children:[e.jsx(a,{className:"font-medium text-white",children:s.lead_name}),e.jsx(a,{className:"text-zinc-400",children:s.lead_email}),e.jsx(a,{children:e.jsx(_,{variant:"outline",className:s.sentiment==="hot"?"border-green-500 text-green-400 bg-green-500/10":s.sentiment==="warm"?"border-yellow-500 text-yellow-400 bg-yellow-500/10":"border-red-500 text-red-400 bg-red-500/10",children:s.sentiment})}),e.jsx(a,{className:"text-zinc-400",children:((t=s.users)==null?void 0:t.name)||"-"}),e.jsx(a,{className:"text-zinc-500",children:new Date(s.created_at).toLocaleDateString()})]},s.id)}),i.length===0&&e.jsx(o,{children:e.jsx(a,{colSpan:5,className:"text-center py-10 text-zinc-500",children:"Noch keine Kontakte erfasst."})})]})]})})]})}export{T as default};
//# sourceMappingURL=leads-3XLp5jI1.js.map
